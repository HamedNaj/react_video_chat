{"version":3,"sources":["SocketContext.js","components/VideoPlayer.jsx","components/Notifications.jsx","components/Options.jsx","App.js","index.js"],"names":["SocketContext","createContext","socket","io","ContextProvider","children","useState","stream","setStream","me","setMe","name","setName","call","setCall","callAccepted","setCallAccepted","callEnded","setCallEnded","myVideo","useRef","userVideo","connectionRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivedCall","Provider","value","callUser","peer","Peer","initiator","trickle","data","emit","userToCall","signalData","leaveCall","destroy","window","location","reload","answerCall","to","useStyles","makeStyles","theme","width","breakpoints","down","gridContainer","justifyContent","flexDirection","paper","padding","border","margin","VideoPlayer","useContext","classes","Grid","container","className","Paper","item","xs","md","Typography","variant","gutterBottom","playsInline","muted","ref","autoPlay","Notifications","callACcepted","style","display","Button","color","onClick","root","marginTop","Options","idToCall","setIdToCall","Container","elevation","noValidate","autoComplete","gutterButtom","TextField","label","onChange","e","target","fullWidth","text","startIcon","Assignment","fontSize","PhoneDisabled","Phone","appBar","borderRadius","alignItems","image","marginLeft","wrapper","App","AppBar","position","align","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b21f82ff.chunk.js","sourcesContent":["import React, {createContext, useRef, useState, useEffect} from 'react'\nimport {io} from 'socket.io-client'\nimport Peer from 'simple-peer'\n\nconst SocketContext = createContext()\n\n// const socket = io('http://localhost:5000');\nconst socket = io('/');\n\nconst ContextProvider = ({children}) => {\n  const [stream, setStream] = useState()\n  const [me, setMe] = useState('')\n  const [name, setName] = useState('')\n  const [call, setCall] = useState({})\n  const [callAccepted, setCallAccepted] = useState(false)\n  const [callEnded, setCallEnded] = useState(false)\n\n  const myVideo = useRef()\n  const userVideo = useRef()\n  const connectionRef = useRef()\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({video: true, audio: true})\n      .then((currentStream) => {\n        setStream(currentStream)\n        myVideo.current.srcObject = currentStream\n      })\n    socket.on('me', (id) => {\n      setMe(id)\n    })\n\n    socket.on('call-user', ({from, name: callerName, signal}) => {\n      setCall({isReceivedCall: true, from, name: callerName, signal})\n    })\n  }, [])\n\n  const answerCall = () => {\n    setCallAccepted(true)\n    const peer = new Peer({initiator: false, trickle: false, stream})\n    peer.on('signal', (data) => {\n      socket.emit('answer-call', {signal: data, to: call.from})\n    })\n    peer.on('stream', (currentStream) => {\n      userVideo.current.srcObject = currentStream\n    })\n    peer.signal(call.signal)\n    connectionRef.current = peer\n  }\n  const callUser = (id) => {\n    const peer = new Peer({initiator: true, trickle: false, stream})\n    peer.on('signal', (data) => {\n      socket.emit('call-user', {userToCall: id, signalData: data, from: me, name})\n    })\n    peer.on('stream', (currentStream) => {\n      userVideo.current.srcObject = currentStream\n    })\n    socket.on('call-accepted', (signal) => {\n      setCallAccepted(true)\n      peer.signal(signal)\n    })\n    connectionRef.current = peer\n  }\n  const leaveCall = () => {\n    setCallEnded(true)\n\n    connectionRef.current.destroy()\n    window.location.reload()\n  }\n  return (\n    <SocketContext.Provider value={{\n      call,\n      callAccepted,\n      myVideo,\n      userVideo,\n      stream,\n      name,\n      setName,\n      callEnded,\n      me,\n      callUser,\n      leaveCall,\n      answerCall\n    }}>\n      {children}\n    </SocketContext.Provider>\n  )\n}\nexport {ContextProvider, SocketContext}\n","import React, {useContext} from 'react'\nimport {Grid, Typography, Paper} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core\";\n\nimport {SocketContext} from \"../SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  video: {\n    width: '550px',\n    [theme.breakpoints.down('xs')]: {\n      width: '300px',\n    },\n  },\n  gridContainer: {\n    justifyContent: 'center',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column',\n    },\n  },\n  paper: {\n    padding: '10px',\n    border: '2px solid black',\n    margin: '10px',\n  },\n}));\n\nconst VideoPlayer = () => {\n  const {name, callAccepted, myVideo, userVideo, callEnded, stream, call} = useContext(SocketContext)\n  const classes = useStyles()\n  return (\n    <Grid container className={classes.gridContainer}>\n      {stream && <Paper className={classes.paper}>\n        <Grid item xs={12} md={6}>\n          <Typography variant='h5' gutterBottom> {name || 'Name'}</Typography>\n          <video playsInline muted ref={myVideo} autoPlay className={classes.video}/>\n        </Grid>\n      </Paper>}\n      {callAccepted && !callEnded && <Paper className={classes.paper}>\n        <Grid item xs={12} md={6}>\n          <Typography variant='h5' gutterBottom>  {call.name || 'Name'}</Typography>\n          <video playsInline ref={userVideo} autoPlay className={classes.video}/>\n        </Grid>\n      </Paper>}\n\n    </Grid>\n  )\n}\n\nexport default VideoPlayer\n","import React, {useContext} from 'react'\nimport {Button} from \"@material-ui/core\";\nimport {SocketContext} from \"../SocketContext\";\n\nconst Notifications = () => {\n  const {answerCall, call, callACcepted} = useContext(SocketContext)\n\n  return (\n    <>\n      {call.isReceivedCall && !callACcepted && (\n        <div style={{display: 'flex', justifyContent: 'center'}}>\n          <h1>{call.name} is calling: </h1>\n          <Button variant='contained' color='primary' onClick={answerCall}>\n            Answer\n          </Button>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default Notifications\n","import React, {useContext, useState} from 'react'\nimport {Button, TextField, Grid, Typography, Container, Paper} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\nimport {Assignment, Phone, PhoneDisabled} from \"@material-ui/icons\";\nimport {SocketContext} from \"../SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  gridContainer: {\n    width: '100%',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column',\n    },\n  },\n  container: {\n    width: '600px',\n    margin: '35px 0',\n    padding: 0,\n    [theme.breakpoints.down('xs')]: {\n      width: '80%',\n    },\n  },\n  margin: {\n    marginTop: 20,\n  },\n  padding: {\n    padding: 20,\n  },\n  paper: {\n    padding: '10px 20px',\n    border: '2px solid black',\n  },\n}));\n\nconst Options = ({children}) => {\n  const {me, callAccepted, callEnded, name, setName, leaveCall, callUser} = useContext(SocketContext)\n  const [idToCall, setIdToCall] = useState('')\n  const classes = useStyles()\n  return (\n    <Container>\n      <Paper elevation={10} className={classes.paper}>\n        <form className={classes.root} noValidate autoComplete='off'>\n          <Grid container className={classes.gridContainer}>\n            <Grid item xs={12} md={6} className={classes.padding}>\n              <Typography gutterButtom variant='h6'> Account Info</Typography>\n              <TextField label='Name' value={name} onChange={(e) => setName(e.target.value)} fullWidth/>\n              <CopyToClipboard text={me} className={classes.margin}>\n                <Button variant='contained' color='primary' fullWidth startIcon={<Assignment fontSize='large'/>}>\n                  Copy Your Id\n                </Button>\n              </CopyToClipboard>\n            </Grid>\n            <Grid item xs={12} md={6} className={classes.padding}>\n              <Typography gutterButtom variant='h6'> Make a Call</Typography>\n              <TextField label='ID to Call' value={idToCall} onChange={(e) => setIdToCall(e.target.value)} fullWidth/>\n              {\n                callAccepted && !callEnded ? (\n                  <Button variant='contained' color='secondary' startIcon={<PhoneDisabled fontSize='large'/>} fullWidth\n                          onClick={leaveCall}\n                          className={classes.margin}\n                  >\n                    Hang Up\n                  </Button>\n                ) : (\n                  <Button variant='contained' color='primary' startIcon={<Phone fontSize='large'/>} fullWidth\n                          onClick={() => callUser(idToCall)}\n                          className={classes.margin}>\n                    Call\n                  </Button>\n                )\n              }\n            </Grid>\n          </Grid>\n        </form>\n      {children}\n      </Paper>\n    </Container>\n  )\n}\n\nexport default Options\n","import React from 'react'\nimport {Typography, AppBar} from '@material-ui/core'\nimport VideoPlayer from './components/VideoPlayer'\nimport Notifications from './components/Notifications'\nimport Options from './components/Options'\nimport {makeStyles} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    borderRadius: 15,\n    margin: '30px 100px',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '600px',\n    border: '2px solid black',\n\n    [theme.breakpoints.down('xs')]: {\n      width: '90%',\n    },\n  },\n  image: {\n    marginLeft: '15px',\n  },\n  wrapper: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n  },\n}));\n\n\nconst App = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.wrapper}>\n      <AppBar position='static' color='inherit' className={classes.appBar}>\n        <Typography variant='h2' align='center'>Video Chat</Typography>\n      </AppBar>\n      <VideoPlayer/>\n      <Options>\n        <Notifications/>\n      </Options>\n\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {ContextProvider} from \"./SocketContext\";\nimport './styles.css'\n\nReactDOM.render(\n  <ContextProvider>\n    <App/>\n  </ContextProvider>\n  , document.getElementById('root')\n)\n"],"sourceRoot":""}