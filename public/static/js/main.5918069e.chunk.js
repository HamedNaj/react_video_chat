(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t){},146:function(e,t){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(9),r=n.n(i),s=n(21),o=n(211),l=n(55),d=n(198),j=n(162),u=n(195),b=n(12),O=n(95),p=n(62),m=n.n(p),x=n(5),f=Object(a.createContext)(),h=function(e){var t=e.children,n=Object(a.useState)(),c=Object(b.a)(n,2),i=c[0],r=c[1],s=Object(a.useState)(),o=Object(b.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(""),u=Object(b.a)(j,2),p=u[0],h=u[1],g=Object(a.useState)(!1),v=Object(b.a)(g,2),w=v[0],C=v[1],y=Object(a.useState)(""),k=Object(b.a)(y,2),N=k[0],S=k[1],I=Object(a.useState)({}),D=Object(b.a)(I,2),E=D[0],L=D[1],R=Object(a.useState)([]),V=Object(b.a)(R,2),A=V[0],B=V[1],P=Object(a.useState)(!1),U=Object(b.a)(P,2),T=U[0],W=U[1],z=Object(a.useState)(!1),H=Object(b.a)(z,2),J=H[0],q=H[1],F=function(e){var t=Object(a.useState)(new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3")),n=Object(b.a)(t,1)[0],c=Object(a.useState)(!1),i=Object(b.a)(c,2),r=i[0],s=i[1];return Object(a.useEffect)((function(){r?n.play():n.pause()}),[r,n]),Object(a.useEffect)((function(){return n.addEventListener("ended",(function(){return s(!1)})),function(){n.removeEventListener("ended",(function(){return s(!1)}))}}),[n]),[function(e){s(e)}]}(),M=Object(b.a)(F,1)[0],G=Object(a.useRef)(),K=Object(a.useRef)(),Q=Object(a.useRef)();return Object(x.jsx)(f.Provider,{value:{call:E,callAccepted:T,myVideo:G,userVideo:K,stream:i,name:N,setName:S,callEnded:J,me:p,usersList:A,loggedIn:w,login:function(e){var t=Object(O.io)("/",{query:{name:e}});d(t),C(!0),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),G.current.srcObject=e})).catch((function(e){console.log("error in getting permissions: ")})),t.on("me",(function(e){h(e)})),t.on("call-user",(function(e){var t=e.from,n=e.name,a=e.signal;L({isReceivedCall:!0,from:t,name:n,signal:a}),M(!0)})),t.on("users-list",(function(e){B(e.users)})),t.on("call-reject",(function(){L({}),M(!1)}))},callUser:function(e){q(!1);var t=new m.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){l.emit("call-user",{userToCall:e,signalData:t,from:p,name:N})})),t.on("stream",(function(e){K.current.srcObject=e})),l.on("call-accepted",(function(e){W(!0),t.signal(e)})),Q.current=t},leaveCall:function(){q(!0),W(!1),L({}),M(!1),Q.current.destroy()},answerCall:function(){W(!0),M(!1);var e=new m.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){l.emit("answer-call",{signal:e,to:E.from})})),e.on("stream",(function(e){K.current.srcObject=e})),e.signal(E.signal),Q.current=e}},children:t})},g=Object(u.a)((function(e){return{video:Object(s.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(s.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),v=function(){var e=Object(a.useContext)(f),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,s=e.stream,o=e.call,u=g();return Object(x.jsxs)(d.a,{container:!0,className:u.gridContainer,children:[s&&Object(x.jsx)(j.a,{className:u.paper,children:Object(x.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(x.jsxs)(l.a,{variant:"h5",gutterBottom:!0,children:[" ",t||"Name"]}),Object(x.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video,id:"myVideo"})]})}),n&&!r&&Object(x.jsx)(j.a,{className:u.paper,children:Object(x.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(x.jsxs)(l.a,{variant:"h5",gutterBottom:!0,children:["  ",o.name||"Name"]}),Object(x.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:u.video})]})})]})},w=n(200),C=n(201),y=function(){var e=Object(a.useContext)(f),t=e.answerCall,n=e.call,c=e.callAccepted,i=e.leaveCall,r=e.callEnded;return Object(x.jsxs)(x.Fragment,{children:[n.isReceivedCall&&!c&&Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(x.jsxs)("h1",{children:[n.name," is calling: "]}),Object(x.jsx)(w.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"}),Object(x.jsx)(w.a,{variant:"contained",color:"secondary",onClick:i,children:"Reject"})]}),c&&!r&&Object(x.jsx)(w.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(C.a,{fontSize:"large"}),fullWidth:!0,onClick:i,style:{marginTop:"20px"},children:"Hang Up"})]})},k=n(209),N=n(212),S=n(210),I=n(101),D=n(202),E=n(203),L=n(204),R=n(207),V=n(206),A=n(213),B=n(205),P=n(208),U=Object(u.a)((function(e){return{root:Object(s.a)({width:"100%",backgroundColor:e.palette.background.paper,justifyContent:"center"},e.breakpoints.down("xs"),{width:"100%"}),span:{width:"100%",backgroundColor:e.palette.background.paper}}}));function T(){var e=U(),t=c.a.useState([]),n=Object(b.a)(t,2),i=n[0],r=n[1],s=Object(a.useContext)(f),o=s.usersList,l=s.callUser,d=s.loggedIn;return Object(x.jsxs)(D.a,{className:e.root,children:[o.map((function(e,t){var n,a="checkbox-list-label-".concat(t);return Object(x.jsxs)(E.a,{role:void 0,dense:!0,button:!0,onClick:(n=t,function(){var e=i.indexOf(n),t=Object(I.a)(i);-1===e?t.push(n):t.splice(e,1),r(t)}),children:[Object(x.jsx)(L.a,{children:Object(x.jsx)(A.a,{edge:"start",checked:-1!==i.indexOf(t),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}})}),Object(x.jsx)(V.a,{id:e,primary:"".concat(e)}),Object(x.jsx)(R.a,{children:Object(x.jsx)(B.a,{edge:"end","aria-label":"comments",onClick:function(){return l(e)},children:Object(x.jsx)(P.a,{})})})]},t)})),d&&0===o.length&&Object(x.jsx)("span",{className:e.span,children:"Nobody is Online"})]})}var W=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(s.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(s.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"90%"}),margin:{marginTop:20,type:"submit"},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),z=function(e){var t=e.children,n=Object(a.useContext)(f),c=n.name,i=n.setName,r=n.login,s=n.usersList,o=n.loggedIn,u=W();return Object(x.jsx)(k.a,{className:u.container,children:Object(x.jsxs)(j.a,{elevation:10,className:u.paper,children:[Object(x.jsx)("form",{className:u.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),r(c)},children:Object(x.jsxs)(d.a,{container:!0,className:u.gridContainer,children:[Object(x.jsxs)(d.a,{item:!0,xs:12,md:12,className:u.padding,children:[Object(x.jsx)(l.a,{variant:"h6",children:" Account Info"}),Object(x.jsx)(N.a,{label:"Name",value:c,onChange:function(e){return i(e.target.value)},fullWidth:!0}),!o&&Object(x.jsx)(w.a,{variant:"contained",color:"primary",startIcon:Object(x.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return r(c)},className:u.margin,children:"Login"})]}),Object(x.jsx)(T,{usersList:s})]})}),t]})})},H=Object(u.a)((function(e){return{appBar:Object(s.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),J=function(){var e=H();return Object(x.jsxs)("div",{className:e.wrapper,children:[Object(x.jsx)(o.a,{position:"static",color:"inherit",className:e.appBar,children:Object(x.jsx)(l.a,{variant:"h2",align:"center",children:"Video Chat"})}),Object(x.jsx)(v,{}),Object(x.jsx)(z,{children:Object(x.jsx)(y,{})})]})};n(160);r.a.render(Object(x.jsx)(h,{children:Object(x.jsx)(J,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.5918069e.chunk.js.map