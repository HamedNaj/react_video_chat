(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t){},146:function(e,t){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(9),r=n.n(i),s=n(21),o=n(211),l=n(55),d=n(198),j=n(162),u=n(195),b=n(12),O=n(95),m=n(62),f=n.n(m),p=n.p+"static/media/notification.9287f5ce.mp3",x=n.p+"static/media/ringtone.874bbc36.mp3",g=n(4),h=Object(a.createContext)(),v=function(e){var t=e.children,n=Object(a.useState)(),c=Object(b.a)(n,2),i=c[0],r=c[1],s=Object(a.useState)(),o=Object(b.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(""),u=Object(b.a)(j,2),m=u[0],v=u[1],C=Object(a.useState)(!1),w=Object(b.a)(C,2),y=w[0],N=w[1],k=Object(a.useState)(""),S=Object(b.a)(k,2),I=S[0],E=S[1],R=Object(a.useState)(""),A=Object(b.a)(R,2),L=A[0],D=A[1],M=Object(a.useState)({}),P=Object(b.a)(M,2),U=P[0],V=P[1],_=Object(a.useState)(!1),B=Object(b.a)(_,2),H=B[0],W=B[1],Z=Object(a.useState)([]),z=Object(b.a)(Z,2),G=z[0],T=z[1],J=Object(a.useState)(!1),q=Object(b.a)(J,2),F=q[0],K=q[1],Q=Object(a.useState)(!1),X=Object(b.a)(Q,2),Y=X[0],$=X[1],ee=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(b.a)(i,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){n&&(s?n.play():n.pause())}),[s,n]),Object(a.useEffect)((function(){if(n)return n.addEventListener("ended",(function(){return o(!1)})),function(){n.removeEventListener("ended",(function(){return o(!1)}))}}),[n]),[function(e,t){"call"===t&&c(new Audio(x)),"sms"===t&&c(new Audio(p)),o(e)}]}(),te=Object(b.a)(ee,1)[0],ne=Object(a.useRef)(),ae=Object(a.useRef)(),ce=Object(a.useRef)(),ie=function(){W(!1),V({}),te(!1),l.emit("call-canceled",L)};return Object(g.jsx)(h.Provider,{value:{call:U,callAccepted:F,myVideo:ne,userVideo:ae,stream:i,name:I,setName:E,callEnded:Y,me:m,usersList:G,loggedIn:y,otherName:L,calling:H,login:function(e){var t=Object(O.io)("/",{query:{name:e}});d(t),sessionStorage.setItem("HPINGER_ZOOM_USERNAME",e),E(e),N(!0),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),ne.current.srcObject=e})).catch((function(e){console.log("error in getting permissions: ")})),t.on("me",(function(e){v(e)})),t.on("call-user",(function(e){var t=e.from,n=e.name,a=e.signal;V({isReceivedCall:!0,from:t,name:n,signal:a}),D(n),te(!0,"call")})),t.on("users-list",(function(t){T(t.users.filter((function(t){return t!==e})))})),t.on("call-reject",(function(){V({}),te(!1)})),t.on("call-ended",(function(){window.location.reload()})),t.on("call-canceled",(function(){V({}),W(!1),te(!1),D("")})),t.on("new-user",(function(){te(!0,"sms")}))},callUser:function(e){$(!1),W(!0);var t=new f.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){l.emit("call-user",{userToCall:e,signalData:t,from:m,name:I}),D(e)})),t.on("stream",(function(e){ae.current.srcObject=e})),l.on("call-accepted",(function(e){K(!0),t.signal(e)})),ce.current=t},leaveCall:function(){l.emit("call-ended",L),window.location.reload()},answerCall:function(){K(!0),te(!1);var e=new f.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){l.emit("answer-call",{signal:e,to:U.from}),D(U.name)})),e.on("stream",(function(e){ae.current.srcObject=e})),e.signal(U.signal),ce.current=e},cancelCall:ie,logout:function(){sessionStorage.removeItem("HPINGER_ZOOM_USERNAME"),ie(),l.disconnect(),d(null),E(""),N(!1),T([])}},children:t})},C=Object(u.a)((function(e){return{video:Object(s.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(s.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),w=function(){var e=Object(a.useContext)(h),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,s=e.stream,o=e.otherName,u=C();return Object(g.jsxs)(d.a,{container:!0,className:u.gridContainer,children:[s&&Object(g.jsx)(j.a,{className:u.paper,children:Object(g.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(g.jsxs)(l.a,{variant:"h5",gutterBottom:!0,children:[" ",t||"Name"]}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video,id:"myVideo"})]})}),n&&!r&&Object(g.jsx)(j.a,{className:u.paper,children:Object(g.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(g.jsxs)(l.a,{variant:"h5",gutterBottom:!0,children:["  ",o||"Name"]}),Object(g.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:u.video})]})})]})},y=n(200),N=n(201),k=function(){var e=Object(a.useContext)(h),t=e.answerCall,n=e.calling,c=e.call,i=e.callAccepted,r=e.leaveCall,s=e.callEnded,o=e.otherName,l=e.cancelCall;return Object(g.jsxs)(g.Fragment,{children:[c.isReceivedCall&&!i&&Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(g.jsxs)("h1",{children:['"',c.name,'" is calling: ']}),Object(g.jsx)(y.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"}),Object(g.jsx)(y.a,{variant:"contained",color:"secondary",onClick:l,children:"Reject"})]}),n&&!i&&Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(g.jsxs)("h1",{children:['calling "',o,'" ']}),Object(g.jsx)(y.a,{variant:"contained",color:"secondary",onClick:l,children:"Cancel"})]}),i&&!s&&Object(g.jsx)(y.a,{variant:"contained",color:"secondary",startIcon:Object(g.jsx)(N.a,{fontSize:"large"}),fullWidth:!0,onClick:r,style:{marginTop:"20px"},children:"Hang Up"})]})},S=n(209),I=n(212),E=n(210),R=n(101),A=n(202),L=n(203),D=n(204),M=n(207),P=n(206),U=n(213),V=n(205),_=n(208),B=Object(u.a)((function(e){return{root:Object(s.a)({width:"100%",backgroundColor:e.palette.background.paper,justifyContent:"center"},e.breakpoints.down("xs"),{width:"100%"}),span:{width:"100%",backgroundColor:e.palette.background.paper}}}));function H(){var e=B(),t=c.a.useState([]),n=Object(b.a)(t,2),i=n[0],r=n[1],s=Object(a.useContext)(h),o=s.usersList,l=s.callUser,d=s.loggedIn;return Object(g.jsxs)(A.a,{className:e.root,children:[o.map((function(e,t){var n,a="checkbox-list-label-".concat(t);return Object(g.jsxs)(L.a,{role:void 0,dense:!0,button:!0,onClick:(n=t,function(){var e=i.indexOf(n),t=Object(R.a)(i);-1===e?t.push(n):t.splice(e,1),r(t)}),children:[Object(g.jsx)(D.a,{children:Object(g.jsx)(U.a,{edge:"start",checked:-1!==i.indexOf(t),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}})}),Object(g.jsx)(P.a,{id:e,primary:"".concat(e)}),Object(g.jsx)(M.a,{children:Object(g.jsx)(V.a,{edge:"end","aria-label":"comments",onClick:function(){return l(e)},children:Object(g.jsx)(_.a,{})})})]},t)})),d&&0===o.length&&Object(g.jsx)("span",{className:e.span,children:"Nobody is Online"})]})}var W=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(s.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(s.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"90%"}),margin:{marginTop:20,type:"submit"},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),Z=function(e){var t=e.children,n=Object(a.useContext)(h),c=n.name,i=n.setName,r=n.login,s=n.usersList,o=n.loggedIn,u=n.logout,b=n.callAccepted,O=W();return Object(a.useEffect)((function(){var e=sessionStorage.getItem("HPINGER_ZOOM_USERNAME");e&&r(e)}),[]),Object(g.jsx)(S.a,{className:O.container,children:Object(g.jsxs)(j.a,{elevation:10,className:O.paper,children:[Object(g.jsx)("form",{className:O.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),r(c)},children:Object(g.jsxs)(d.a,{container:!0,className:O.gridContainer,children:[Object(g.jsxs)(d.a,{item:!0,xs:12,md:12,className:O.padding,children:[!b&&Object(g.jsxs)(l.a,{variant:"h6",children:[" Account Info : ",c]}),!o&&Object(g.jsx)(I.a,{label:"Name",value:c,onChange:function(e){return i(e.target.value)},fullWidth:!0}),!o&&Object(g.jsx)(y.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(E.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return r(c)},className:O.margin,children:"Login"}),o&&!b&&Object(g.jsx)(y.a,{variant:"contained",color:"secondary",startIcon:Object(g.jsx)(E.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return u()},className:O.margin,children:"Logout"})]}),!b&&Object(g.jsx)(H,{usersList:s})]})}),t]})})},z=Object(u.a)((function(e){return{appBar:Object(s.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),G=function(){var e=z();return Object(g.jsxs)("div",{className:e.wrapper,children:[Object(g.jsx)(o.a,{position:"static",color:"inherit",className:e.appBar,children:Object(g.jsx)(l.a,{variant:"h2",align:"center",children:"Hpinger Zoom"})}),Object(g.jsx)(w,{}),Object(g.jsx)(Z,{children:Object(g.jsx)(k,{})})]})};n(160);r.a.render(Object(g.jsx)(v,{children:Object(g.jsx)(G,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.51716762.chunk.js.map